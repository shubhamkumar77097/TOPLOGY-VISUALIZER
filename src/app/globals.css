@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Theme Variables */
:root[data-theme="dark"] {
  --background: #0a0a0a;
  --foreground: #ededed;
  --card-bg: rgba(30, 30, 30, 0.95);
  --card-fg: #ffffff;
  --panel-bg: rgba(20, 20, 20, 0.95);
  --panel-border: rgba(255, 255, 255, 0.2);
  --input-bg: rgba(255, 255, 255, 0.15);
  --input-border: rgba(255, 255, 255, 0.3);
  --input-fg: #ffffff;
  --hover-bg: rgba(255, 255, 255, 0.15);
  --shadow: rgba(0, 0, 0, 0.5);
  --legend-bg: rgba(255, 255, 255, 0.95);
  --legend-fg: #000000;
  --badge-bg: rgba(30, 30, 30, 0.95);
  --badge-fg: #ffffff;
  --button-bg: rgba(255, 255, 255, 0.15);
  --button-hover: rgba(255, 255, 255, 0.25);
  --chart-grid: rgba(255, 255, 255, 0.1);
  --chart-text: #ededed;
}

:root[data-theme="light"] {
  --background: #f5f5f5;
  --foreground: #171717;
  --card-bg: rgba(255, 255, 255, 0.95);
  --card-fg: #000000;
  --panel-bg: rgba(255, 255, 255, 0.9);
  --panel-border: rgba(0, 0, 0, 0.1);
  --input-bg: rgba(255, 255, 255, 0.9);
  --input-border: rgba(0, 0, 0, 0.2);
  --input-fg: #000000;
  --hover-bg: rgba(0, 0, 0, 0.05);
  --shadow: rgba(0, 0, 0, 0.1);
  --legend-bg: rgba(255, 255, 255, 0.9);
  --legend-fg: #000000;
  --badge-bg: rgba(255, 255, 255, 0.9);
  --badge-fg: #000000;
  --button-bg: rgba(0, 0, 0, 0.05);
  --button-hover: rgba(0, 0, 0, 0.1);
  --chart-grid: rgba(0, 0, 0, 0.1);
  --chart-text: #171717;
}

/* Default to dark theme */
:root {
  --background: #0a0a0a;
  --foreground: #ededed;
  --card-bg: rgba(30, 30, 30, 0.95);
  --card-fg: #ffffff;
  --panel-bg: rgba(20, 20, 20, 0.95);
  --panel-border: rgba(255, 255, 255, 0.2);
  --input-bg: rgba(255, 255, 255, 0.15);
  --input-border: rgba(255, 255, 255, 0.3);
  --input-fg: #ffffff;
  --hover-bg: rgba(255, 255, 255, 0.15);
  --shadow: rgba(0, 0, 0, 0.5);
  --legend-bg: rgba(255, 255, 255, 0.95);
  --legend-fg: #000000;
  --badge-bg: rgba(30, 30, 30, 0.95);
  --badge-fg: #ffffff;
  --button-bg: rgba(255, 255, 255, 0.15);
  --button-hover: rgba(255, 255, 255, 0.25);
  --chart-grid: rgba(255, 255, 255, 0.1);
  --chart-text: #ededed;
}

/* Make the 3D canvas fill the entire screen */
html,
body,
#root,
#__next {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--background);
  color: var(--foreground);
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* FORCE UI ELEMENTS TO BE VISIBLE - CRITICAL OVERRIDES */
/* These rules ensure ControlsPanel and Legend are always visible regardless of other styles */

/* Force ControlsPanel visibility (default) */
[class*="ControlsPanel"],
.fixed.top-4.right-4 {
  display: block !important;
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
  z-index: 999999 !important;
  position: fixed !important;
}

/* Centered, white ControlsPanel variant */
[data-center="true"].z-\[1000000\],
[data-center="true"][class*="ControlsPanel"] {
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  width: min(90vw, 380px) !important;
  background-color: #ffffff !important;
  color: #000000 !important;
  border: 2px solid rgba(0, 0, 0, 0.2) !important;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25) !important;
}

/* Fallback dark style (when not center variant) */
[class*="ControlsPanel"]:not([data-center="true"]) {
  top: 1rem !important;
  right: 1rem !important;
  background-color: rgba(40, 40, 40, 0.98) !important;
  color: white !important;
  border: 2px solid rgba(255, 255, 255, 0.4) !important;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.9) !important;
}

/* Force Legend visibility */
[class*="Legend"],
.fixed.bottom-4.left-4 {
  display: block !important;
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
  z-index: 999998 !important;
  position: fixed !important;
  background-color: rgba(255, 255, 255, 0.95) !important;
  color: black !important;
  border: 2px solid rgba(0, 0, 0, 0.2) !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
}

/* Ensure all buttons and interactive elements in panels are visible */
[class*="ControlsPanel"] button,
[class*="Legend"] button,
.fixed.top-4.right-4 button,
.fixed.bottom-4.left-4 button {
  background-color: rgba(0, 0, 0, 0.05) !important;
  color: #000000 !important;
  border: 1px solid rgba(0, 0, 0, 0.2) !important;
  padding: 0.25rem 0.75rem !important;
  cursor: pointer !important;
  display: inline-block !important;
}

/* Make sure text is readable */
[class*="Legend"] *,
.fixed.bottom-4.left-4 * {
  color: black !important;
}

/* For centered white panel, ensure inner text is black */
[data-center="true"] *,
[data-center="true"] .fixed.top-4.right-4 * {
  color: #000000 !important;
}

/* Override any pointer-events:none on parent containers */
body > div,
#__next,
[class*="Scene"] {
  pointer-events: auto;
}

body > div > div {
  pointer-events: auto;
}
